<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 é¦¬å¹´é–‹é‹æŠ½ç´…åŒ… - 32 å–œæ°£å¤§æ”¾é€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@700&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --red: #D40000;
            --gold: #FFD700;
            --dark-red: #8B0000;
            --paper: #FFF8E1;
        }

        body {
            background-color: #8B0000;
            background-image: radial-gradient(rgba(255, 215, 0, 0.15) 1px, transparent 1px);
            background-size: 30px 30px;
            font-family: 'Noto Sans TC', sans-serif;
            color: var(--gold);
            overflow-x: hidden;
            min-height: 100vh;
        }

        .festive-font { font-family: 'Noto Serif TC', serif; }

        /* Entry Screen */
        #entry-screen {
            position: fixed;
            inset: 0;
            background: var(--red);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.8s ease, visibility 0.8s;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 30c0-16.569 13.431-30 30-30v60c-16.569 0-30-13.431-30-30zM0 30c0 16.569 13.431 30 30 30V0C13.431 0 0 13.431 0 30z' fill='%238B0000' fill-opacity='0.4' fill-rule='evenodd'/%3E%3C/svg%3E");
        }

        .entry-button {
            background: var(--gold);
            color: var(--dark-red);
            padding: 1rem 3rem;
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 9999px;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 4px solid var(--paper);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Grid */
        .envelope-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 15px;
            width: 100%;
            max-width: 1000px;
            padding: 20px;
        }

        .envelope-item {
            aspect-ratio: 3/4;
            background: var(--red);
            border: 2px solid var(--gold);
            border-radius: 8px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }

        .envelope-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(255, 215, 0, 0.3);
        }

        .envelope-item .seal {
            font-size: 24px;
            color: var(--gold);
            font-weight: bold;
            border: 2px solid var(--gold);
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        /* Animation Stage */
        #stage-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.92);
            display: none;
            z-index: 100;
            align-items: center;
            justify-content: flex-end; /* æŠŠç´…åŒ…è¢‹æ”¾åœ¨ä¸‹æ–¹ï¼Œé ç•™ä¸Šæ–¹ç©ºé–“ */
            flex-direction: column;
            padding-bottom: 15vh; /* åº•éƒ¨å¢Šé«˜ï¼Œè®“å¡ç‰‡å½ˆå‡ºåœ¨ä¸­å¤® */
        }

        /* 3D Envelope Container */
        .big-envelope {
            width: min(85vw, 400px);
            height: min(50vh, 480px);
            background: var(--red);
            position: relative;
            border-radius: 15px;
            transform-style: preserve-3d;
            box-shadow: 0 30px 60px rgba(0,0,0,1);
            transition: transform 0.5s ease;
        }

        /* The Flap */
        .flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: var(--red);
            border: 3px solid var(--gold);
            border-radius: 15px 15px 0 0;
            transform-origin: top;
            z-index: 30; /* é—œé–‰æ™‚åœ¨æœ€å‰ */
            transition: transform 0.8s ease-in-out, opacity 0.5s ease 0.3s, z-index 0s linear 0.4s;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 25px;
        }

        .big-envelope.open .flap {
            transform: rotateX(170deg); /* ç¿»è½‰æ›´å¾¹åº• */
            opacity: 0.2; /* é–‹å•Ÿå¾Œè®Šé€æ˜ï¼Œé¿å…æ“‹ä½è¦–ç·š */
            z-index: 1; /* é™ç´šåˆ°èƒŒå¾Œ */
        }

        /* The Card inside */
        .greeting-card {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            height: calc(100% - 40px);
            background: var(--paper);
            border-radius: 12px;
            z-index: 5; /* åˆå§‹åœ¨è¢‹å…§ */
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.4s, z-index 0s linear 0.4s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            text-align: center;
            color: var(--dark-red);
            box-shadow: inset 0 0 30px rgba(0,0,0,0.1), 0 10px 40px rgba(0,0,0,0.4);
            border: 2px solid var(--gold);
        }

        .big-envelope.open .greeting-card {
            transform: translateY(-110%); /* å½ˆå‡ºå¾—æ›´é  */
            z-index: 100; /* çµ•å°ç½®é ‚ */
        }

        /* Front Cover */
        .front-cover {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 55%;
            background: var(--red);
            border: 3px solid var(--gold);
            border-radius: 0 0 15px 15px;
            z-index: 20; 
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Decorative Lanterns */
        .bg-lantern {
            position: fixed;
            top: -20px;
            width: 80px;
            animation: swing 3s ease-in-out infinite alternate;
            z-index: 1;
        }

        @keyframes swing {
            from { transform: rotate(-5deg); }
            to { transform: rotate(5deg); }
        }

        #music-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 150;
            background: rgba(212, 0, 0, 0.8);
            border: 2px solid var(--gold);
            color: var(--gold);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body class="flex flex-col items-center py-10">

    <div id="entry-screen">
        <div class="text-center mb-8 px-4">
            <div class="mb-6 flex justify-center">
                <svg width="120" height="120" viewBox="0 0 100 100" fill="gold">
                    <path d="M20,80 Q30,40 60,30 Q80,20 90,10 L85,40 Q70,50 60,80 Z"></path>
                    <circle cx="75" cy="25" r="2" fill="red"/>
                </svg>
            </div>
            <h1 class="festive-font text-5xl md:text-7xl mb-4 tracking-tighter text-gold">2026 ä¸™åˆé¦¬å¹´</h1>
            <p class="text-2xl text-[#FFD700] opacity-90 festive-font mb-10">é–‹é‹å¤§æŠ½çï¼å¥½é‹ã€Œé¦¬ã€ä¸Šåˆ°</p>
            <button class="entry-button festive-font" onclick="startApp()">
                é»æ“Šé–‹å•Ÿé¦¬å¹´å¥½é‹ ğŸ§§
            </button>
        </div>
    </div>

    <audio id="bgm" loop>
        <source src="https://cdn.pixabay.com/download/audio/2026/01/14/audio_3265c1aace.mp3?filename=viacheslavstarostin-chinese-lunar-new-year-465871.mp3" type="audio/mpeg">
    </audio>

    <audio id="sfx-click" preload="auto"><source src="https://cdn.pixabay.com/download/audio/2022/03/24/audio_30dda4adf4.mp3?filename=freesound_community-paper-plane-blow-100032.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-open" preload="auto"><source src="https://cdn.pixabay.com/download/audio/2022/03/17/audio_ac64c14ad7.mp3?filename=freesound_community-papercrackle1-94430.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-success" preload="auto"><source src="https://cdn.pixabay.com/download/audio/2025/11/19/audio_653dfff9ab.mp3?filename=dragon-studio-festive-chime-439612.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-reset" preload="auto"><source src="https://cdn.pixabay.com/download/audio/2025/08/02/audio_e87ddb7db2.mp3?filename=virtual_vibes-minimal-ui-pop-383735.mp3" type="audio/mpeg"></audio>

    <button id="music-toggle" onclick="toggleMusic()">
        <svg id="music-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" />
        </svg>
    </button>

    <img src="https://img.icons8.com/color/96/chinese-lantern.png" class="bg-lantern" style="left: 5%;" alt="Lantern">
    <img src="https://img.icons8.com/color/96/chinese-lantern.png" class="bg-lantern" style="right: 5%;" alt="Lantern">

    <header class="text-center mb-10 px-4 relative z-10">
        <h1 class="festive-font text-5xl md:text-6xl mb-4 tracking-widest drop-shadow-lg text-gold">ä¸™åˆé¦¬å¹´ï¼é–‹é‹å¤§æŠ½ç</h1>
        <p class="text-xl text-white opacity-90">é€™è£¡æœ‰ 32 å€‹ç¦æ°£ç´…åŒ…ï¼Œé¸ä¸€å€‹é–‹å•Ÿæ‚¨çš„ä¸€å¹´å¥½é‹ï¼</p>
    </header>

    <div id="grid-container" class="envelope-grid relative z-10"></div>

    <div id="stage-overlay">
        <div id="big-envelope-wrapper" class="big-envelope">
            <div class="flap">
                <div class="w-16 h-16 rounded-full border-2 border-[#FFD700] flex items-center justify-center text-[#FFD700] text-xl font-bold bg-[#D40000]">ç¦</div>
            </div>
            <div class="greeting-card">
                <div class="text-base font-bold text-gray-400 mb-6">2026 é¦¬å¹´å¤§å‰</div>
                <div id="result-text" class="text-4xl md:text-5xl font-bold festive-font mb-10 leading-relaxed text-[#8B0000]">
                    å‰ç¥¥è©±
                </div>
                <div class="w-24 h-1 bg-red-200 mb-10"></div>
                <button onclick="resetGame()" class="bg-[#D40000] text-white px-12 py-4 rounded-full font-bold text-xl hover:bg-black transition-all shadow-xl active:scale-95">
                    æ”¶ä¸‹ç¥ç¦
                </button>
            </div>
            <div class="front-cover">
                <span class="text-gold opacity-20 text-7xl">ğŸ</span>
            </div>
        </div>
    </div>

    <footer class="mt-20 text-gold opacity-60 text-sm text-center">
        <p>Â© 2026 ä¸™åˆå¹´ Â· é›»æ©Ÿç§‘å°å¸«ç¥æ‚¨é¦¬åˆ°æˆåŠŸ</p>
    </footer>

    <script>
        const greetings = [
            "é¾é¦¬ç²¾ç¥", "é¦¬åˆ°æˆåŠŸ", "ä¸€é¦¬ç•¶å…ˆ", "è¬é¦¬å¥”é¨°", "å¤©é¦¬è¡Œç©º",
            "è€é¦¬è­˜é€”", "ç­–é¦¬å…¥æ—", "æ±—é¦¬åŠŸå‹", "åƒé‡Œä¹‹å¿—", "é§Ÿé¦¬é«˜é–€",
            "ã€Œé¦¬ã€ä¸Šæœ‰éŒ¢", "ã€Œé¦¬ã€ä¸Šæœ‰ç¦", "ã€Œé¦¬ã€ä¸Šå°ä¾¯", "ã€Œé¦¬ã€ä¸Šè„«å–®", "ã€Œé¦¬ã€ä¸Šæˆå®¶",
            "å¹¸ç¦ã€Œé¦¬ã€æ‹‰æ¾", "ã€Œé¦¬ã€åˆ°ç¦åˆ°", "å¿«ã€Œé¦¬ã€åŠ é­", "é¾é¦¬ã€Œèˆã€æ˜¥", "é¦¬åŠ›åè¶³",
            "ã€Œç¢¼ã€åˆ°æˆåŠŸ", "é¦¬åŠ›å…¨é–‹ï¼Œé›»æ§æœªä¾†", "å¤©é¦¬è¡Œç©ºï¼ŒCanvas ç²¾å½©", "Gemini åŠ©åŠ›ï¼Œé¦¬ä¸åœè¹„", "æ­¥å±¥ä¸åœï¼Œæ™‰å‡ Innovator",
            "é¾é¦¬ç²¾ç¥ï¼Œç§‘ç§‘åŠæ ¼", "é¦¬ä¸Šæœ‰éˆæ„Ÿï¼ŒGAS è·‘ä¸å®Œ", "è·æ¶¯å¥”é¨°ï¼Œæ•™å­¸å¦‚é­šå¾—æ°´", "è¼¸å‡ºæœ€å¼·ï¼Œé›»è·¯ä¸çŸ­è·¯", "é¦¬å¹´è½‰ä¹¾å¤ï¼Œæ•™å­¸æ–°æ°£è±¡",
            "èºé¦¬è¿æ˜¥ï¼Œå¯Œè²´ç›ˆé–€", "ç¥é‡‡é§¿é¦¬ï¼Œå¥½é‹é€£ç™¼"
        ];

        const bgm = document.getElementById('bgm');
        const sfxClick = document.getElementById('sfx-click');
        const sfxOpen = document.getElementById('sfx-open');
        const sfxSuccess = document.getElementById('sfx-success');
        const sfxReset = document.getElementById('sfx-reset');
        
        let bgmStarted = false;
        let wasPlayingBeforeHidden = false;

        const grid = document.getElementById('grid-container');
        for (let i = 0; i < 32; i++) {
            const el = document.createElement('div');
            el.className = 'envelope-item';
            el.innerHTML = `<div class="seal">ç¦</div>`;
            el.onclick = () => openRedEnvelope();
            grid.appendChild(el);
        }

        function startApp() {
            const entryScreen = document.getElementById('entry-screen');
            bgm.play().catch(e => console.log(e));
            bgmStarted = true;
            updateMusicIcon();
            sfxClick.play();
            entryScreen.style.opacity = '0';
            setTimeout(() => { entryScreen.style.visibility = 'hidden'; }, 800);
        }

        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'hidden') {
                wasPlayingBeforeHidden = !bgm.paused;
                if (wasPlayingBeforeHidden) bgm.pause();
            } else {
                if (wasPlayingBeforeHidden && bgmStarted) bgm.play().catch(e => console.log(e));
            }
            updateMusicIcon();
        });

        function openRedEnvelope() {
            if (!bgmStarted) { bgm.play(); bgmStarted = true; updateMusicIcon(); }
            sfxClick.currentTime = 0; sfxClick.play();
            const overlay = document.getElementById('stage-overlay');
            const envelope = document.getElementById('big-envelope-wrapper');
            const resultText = document.getElementById('result-text');
            resultText.innerText = greetings[Math.floor(Math.random() * greetings.length)];
            overlay.style.display = 'flex';
            setTimeout(() => {
                sfxOpen.currentTime = 0; sfxOpen.play();
                envelope.classList.add('open');
                createConfetti();
                setTimeout(() => { sfxSuccess.currentTime = 0; sfxSuccess.play(); }, 400);
            }, 100);
        }

        function resetGame() {
            sfxReset.currentTime = 0; sfxReset.play();
            const overlay = document.getElementById('stage-overlay');
            const envelope = document.getElementById('big-envelope-wrapper');
            envelope.classList.remove('open');
            setTimeout(() => { overlay.style.display = 'none'; }, 500);
        }

        function toggleMusic() {
            if (bgm.paused) bgm.play(); else bgm.pause();
            updateMusicIcon();
        }

        function updateMusicIcon() {
            const icon = document.getElementById('music-icon');
            if (bgm.paused) {
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2" />';
            } else {
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" />';
            }
        }

        function createConfetti() {
            const colors = ['#FFD700', '#FFFFFF', '#FF4D4D', '#FFF8E1'];
            for (let i = 0; i < 60; i++) {
                const div = document.createElement('div');
                div.style.position = 'fixed';
                div.style.left = '50vw'; div.style.top = '40vh'; 
                div.style.width = '12px'; div.style.height = '12px';
                div.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                div.style.zIndex = '200'; div.style.pointerEvents = 'none';
                document.body.appendChild(div);
                const angle = Math.random() * Math.PI * 2;
                const tx = Math.cos(angle) * (150 + Math.random() * 250);
                const ty = Math.sin(angle) * (150 + Math.random() * 250);
                const animation = div.animate([
                    { transform: 'translate(0, 0) scale(1) rotate(0deg)', opacity: 1 },
                    { transform: `translate(${tx}px, ${ty}px) scale(0) rotate(${Math.random()*360}deg)`, opacity: 0 }
                ], { duration: 1200 + Math.random() * 1000, easing: 'cubic-bezier(0.16, 1, 0.3, 1)' });
                animation.onfinish = () => div.remove();
            }
        }
    </script>
</body>
</html>